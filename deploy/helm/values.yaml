# Default values for numa-scheduler.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# DaemonSet configuration
daemonSet:
  # Number of old history to retain to allow rollback
  revisionHistoryLimit: 3
  # Update strategy
  updateStrategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
  # Pod termination grace period
  terminationGracePeriodSeconds: 1

# Image configuration
image:
  # Use custom image or build from binary
  useCustomImage: false
  # Custom image repository (when useCustomImage is true)
  repository: numa-scheduler
  # Image pull policy
  pullPolicy: IfNotPresent
  # Image tag
  tag: "latest"

# Binary configuration (when useCustomImage is false)
binary:
  # Base64 encoded binary content
  # This will be generated by `make generate-binary`
  content: ""
  # Binary permissions
  permissions: "0755"

# Node selector
nodeSelector:
  kubernetes.io/os: linux

# Tolerations
tolerations:
  - key: node-role.kubernetes.io/master
    operator: Exists
    effect: NoSchedule
  - key: node-role.kubernetes.io/control-plane
    operator: Exists
    effect: NoSchedule

# Affinity
affinity: {}

# Resources
resources:
  limits:
    cpu: 100m
    memory: 64Mi
  requests:
    cpu: 10m
    memory: 32Mi

# Security context
securityContext:
  runAsNonRoot: false
  runAsUser: 0
  fsGroup: 0

# Container security context
containerSecurityContext:
  privileged: true
  allowPrivilegeEscalation: true
  readOnlyRootFilesystem: false

# Host settings
hostPID: true

# Volume mounts
volumeMounts:
  - name: hook-bin
    mountPath: /host/opt/cni/bin

# Volumes
volumes:
  - name: hook-bin
    hostPath:
      path: /opt/cni/bin
      type: DirectoryOrCreate

# Service account
serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

# Pod annotations
podAnnotations: {}

# Pod labels
podLabels: {}

# Additional init containers
additionalInitContainers: []

# Additional containers
additionalContainers: []

# Containerd configuration
containerd:
  # Path to containerd config file
  configPath: /etc/containerd/config.toml
  # Whether to update containerd config automatically
  updateConfig: true
  # Backup original config
  backupConfig: true

# Hook configuration
hook:
  # Hook binary path on host
  binaryPath: /opt/cni/bin/cpuset-hook
  # Hook type
  hookType: "createRuntime"
  # Hook environment variables
  env: []
  # Hook arguments
  args: []

# RBAC
rbac:
  # Specifies whether RBAC resources should be created
  create: true
  # Rules for the ClusterRole
  rules:
    - apiGroups: [""]
      resources: ["nodes"]
      verbs: ["get", "list", "watch"]
    - apiGroups: [""]
      resources: ["pods"]
      verbs: ["get", "list", "watch"]

# Monitoring
monitoring:
  # Enable Prometheus metrics
  enabled: false
  # Service monitor configuration
  serviceMonitor:
    enabled: false
    namespace: ""
    labels: {}
    interval: 30s
    scrapeTimeout: 10s

# Logging
logging:
  # Log level (debug, info, warn, error)
  level: "info"
  # Log format (json, text)
  format: "text"